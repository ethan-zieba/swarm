---
- name: GFS Cluster ansible setup - \#ULTRACYRIL
  hosts: glusterfs
  become: true
  roles:
    - glusterfs

- name: Docker Swarm setup
  hosts: docker_nodes
  become: true
  roles:
    - docker_swarm

- name: Initialize Docker Swarm Manager
  hosts: swarm_manager
  become: true
  roles:
    - role: docker_swarm
      tasks_from: init_manager

- name: Join Docker Swarm Workers to the cluster
  hosts: swarm_workers
  become: true
  roles:
    - role: docker_swarm
      tasks_from: join_worker

- name: Create Docker Volume backed by GlusterFS on all Swarm nodes
  hosts: swarm_nodes
  become: true
  roles:
    - role: docker_swarm
      tasks_from: volume
